import{j as e,A as p,r as c,u as b,d as j,F as N,c as g,M as y,L as w,g as v,a as S,b as A,e as E,f as k,h as I,i as F}from"./index-6cb6b747.js";import{A as L}from"./animal.image.skeleton-1ccc112a.js";const D=({animal:s})=>e.jsxs(e.Fragment,{children:[e.jsx(p,{animal:s,className:"rounded-t-lg border-b border-gray-600 [&>img]:rounded-t-lg",thumbnail:!0}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"mb-1 text-xl font-bold text-brown-900",children:s.ANIMALNAME}),e.jsxs("div",{className:"mb-4 text-gray-600",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("b",{children:"Born:"})," ",Intl.DateTimeFormat().format(new Date(s.DATEOFBIRTH))]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("b",{children:"Age:"})," ",s.ANIMALAGE.replace(".","").replace("0 months","")]}),e.jsxs("p",{className:"text-sm font-bold",children:[s.SEX===1?s.NEUTERED?"Neutered ":"Spayed ":"",s.SEXNAME]}),e.jsx("p",{className:"text-sm font-bold",children:s.BASECOLOURNAME})]}),e.jsx("p",{className:"mt-1",children:s.ANIMALCOMMENTS})]})]}),T=()=>e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-40 rounded-t-lg border-b border-gray-600 [&>img]:rounded-t-lg"}),e.jsxs("div",{className:"animate-pulse p-4",children:[e.jsx("h3",{className:"mb-2 mt-1 h-5 w-48 rounded-full bg-gray-200 text-xl"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"my-1.5 h-3.5 w-24 rounded-full bg-gray-200 text-sm"}),e.jsx("p",{className:"my-1.5 h-3.5 w-36 rounded-full bg-gray-200 text-sm"}),e.jsx("p",{className:"my-1.5 h-3.5 w-48 rounded-full bg-gray-200 text-sm"}),e.jsx("p",{className:"my-1.5 h-3.5 w-48 rounded-full bg-gray-200 text-sm"})]}),e.jsx("p",{className:"my-1 mt-1 h-4 rounded-full bg-gray-200 text-base"}),e.jsx("p",{className:"my-1 mt-1 h-4 rounded-full bg-gray-200 text-base"}),e.jsx("p",{className:"my-1 mt-1 h-4 rounded-full bg-gray-200 text-base"})]})]}),M=({query:s,pageTitle:t})=>{const n=c.useRef(null),i=b(),o=c.useRef(null),[r,a]=c.useState(null),[l,h]=c.useState(!1),f=j(m=>{const d=s===null,u=new FormData(m.target.form??void 0);u.get("q")===""&&u.delete("q"),i(u,{replace:!d})},300);return c.useEffect(()=>{n.current&&(n.current.value=s??"")},[n,s]),c.useEffect(()=>{var d;const m=((d=o.current)==null?void 0:d.offsetTop)??null;a(m)},[]),c.useEffect(()=>{const m=()=>{if(r===null)return;const d=o.current,u=(d==null?void 0:d.offsetTop)??0;h(u>r)};return window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m)},[r,l]),e.jsx(N,{ref:o,id:"search-form",role:"search",className:g("sticky top-20 z-20 py-4 transition-shadow",l?"border-y border-brown-900 bg-brown-100 py-4 shadow-md shadow-black/20 px-safe-offset-4 md:px-safe-offset-6 lg:px-safe-offset-8 2xl:px-safe-offset-10":"",l?"ml-[calc(env(safe-area-inset-left)*-1-1rem)] mr-[calc(env(safe-area-inset-right)*-1-1rem)] md:ml-[calc(env(safe-area-inset-left)*-1-1.5rem)] md:mr-[calc(env(safe-area-inset-right)*-1-1.5rem)] lg:ml-[calc(env(safe-area-inset-left)*-1-2rem)] lg:mr-[calc(env(safe-area-inset-right)*-1-2rem)] 2xl:ml-[calc(env(safe-area-inset-left)*-1-2.5rem)] 2xl:mr-[calc(env(safe-area-inset-right)*-1-2.5rem)]":""),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("h1",{className:g("hidden flex-1 text-4xl font-bold text-brown-900 transition-opacity sm:block",l?"opacity-100":"opacity-0"),children:t}),e.jsx("label",{htmlFor:"search-field",className:"sr-only",children:"Search"}),e.jsxs("div",{className:"relative w-full rounded-md shadow-sm sm:max-w-sm",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex h-9 items-center pl-3",children:e.jsx(y,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),e.jsx("input",{ref:n,type:"search",name:"q",id:"q",className:"block w-full rounded-md border-0 py-1.5 pl-10 pr-1.5 ring-1 ring-inset ring-gray-600 placeholder:text-gray-400 focus-within:outline-none focus:ring-2 focus:ring-inset focus:ring-brown-900 sm:text-sm sm:leading-6",placeholder:"Search...","aria-label":"Search for an animal",defaultValue:s??"",onChange:f})]})]})})},R=({animals:s,selected:t,query:n,pageTitle:i})=>{const o=c.useRef([]);return c.useEffect(()=>{t&&setTimeout(()=>{var a,l;const r=s.findIndex(h=>h.ID===t.ID);(a=o.current[r])==null||a.scrollIntoView({block:"center",behavior:"smooth"}),(l=o.current[r])==null||l.focus({preventScroll:!0})},100)},[s,t]),e.jsx(e.Fragment,{children:s.length?e.jsxs(e.Fragment,{children:[e.jsx(M,{query:n,pageTitle:i}),e.jsx("ul",{className:"grid gap-x-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-6",children:s.map((r,a)=>e.jsx("li",{id:r.ID.toString(),className:"py-4",children:e.jsx(w,{to:r.ID.toString(),ref:l=>o.current[a]=l,className:"block h-full rounded-lg bg-white shadow ring-1 ring-gray-600 transition-all focus-within:outline-none hover:shadow-lg focus:ring focus:ring-brown-900 sm:hover:scale-105",children:e.jsx(D,{animal:r})})},r.ID))})]}):e.jsx("div",{className:"mb-8 mt-8 flex h-32 flex-col items-center justify-center gap-4 rounded-2xl bg-white/25 p-4",children:e.jsx("p",{children:"Please check back for updated availablility"})})})},C=()=>e.jsx("div",{className:"animate-pulse py-4",children:e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("div",{className:"w-full rounded-md sm:max-w-sm",children:e.jsx("div",{className:"h-9 w-full rounded-md bg-gray-200 py-1.5 pl-10 pr-1.5 ring-1 ring-inset ring-gray-600"})})})}),P=()=>e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsx("ul",{className:"grid gap-x-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-6",children:[1,2,3,4,5,6,7,8,9,10,11,12].map((s,t)=>e.jsx("li",{id:t.toString(),className:"py-4",children:e.jsx("div",{className:"h-full rounded-lg bg-white ring-1 ring-gray-600",children:e.jsx(T,{})})},t))})]});function B({request:s},t){const n=new URL(s.url),i=n.searchParams.get("q"),r=n.searchParams.get("skeleton")==="true"?new Promise(()=>[]):v(i,t),a=S();return A({animals:r,selected:a,query:i})}const U=()=>{const{animals:s,selected:t,query:n}=E(),{pathname:i}=k(),r=I().find(x=>x.pathname===`${i}/`),a=r==null?void 0:r.handle,l=(a==null?void 0:a.pageTitle)||"Animals",h=(a==null?void 0:a.summary)||null;return e.jsxs("div",{children:[e.jsx("h1",{className:"mb-4 text-4xl font-bold text-brown-900",children:l}),h,e.jsx(c.Suspense,{fallback:e.jsx(P,{}),children:e.jsx(F,{resolve:s,children:x=>e.jsx(R,{animals:x,selected:t,query:n,pageTitle:l})})})]})};export{U as AnimalsPage,B as loader};
