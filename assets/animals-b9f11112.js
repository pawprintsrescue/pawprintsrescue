import{j as e,A as f,r as o,u as p,d as b,F as j,c as x,M as N,L as y,g as w,a as v,b as S,e as A,f as E,h as k,i as I}from"./index-5c1e44b1.js";import{A as F}from"./animal.image.skeleton-c2821d10.js";const L=({animal:s})=>e.jsxs(e.Fragment,{children:[e.jsx(f,{animal:s,className:"rounded-t-lg border-b border-gray-600 [&>img]:rounded-t-lg",thumbnail:!0}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"mb-1 text-xl font-bold text-brown-900",children:s.ANIMALNAME}),e.jsxs("div",{className:"mb-4 text-gray-600",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("b",{children:"Born:"})," ",Intl.DateTimeFormat().format(new Date(s.DATEOFBIRTH))]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("b",{children:"Age:"})," ",s.ANIMALAGE.replace(".","").replace("0 months","")]}),e.jsxs("p",{className:"text-sm font-bold",children:[s.SEX===1?s.NEUTERED?"Neutered ":"Spayed ":"",s.SEXNAME]}),e.jsx("p",{className:"text-sm font-bold",children:s.BASECOLOURNAME})]}),e.jsx("p",{className:"mt-1",children:s.ANIMALCOMMENTS})]})]}),D=()=>e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-40 rounded-t-lg border-b border-gray-600 [&>img]:rounded-t-lg"}),e.jsxs("div",{className:"animate-pulse p-4",children:[e.jsx("h3",{className:"mb-2 mt-1 h-5 w-48 rounded-full bg-gray-200 text-xl"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"my-1.5 h-3.5 w-24 rounded-full bg-gray-200 text-sm"}),e.jsx("p",{className:"my-1.5 h-3.5 w-36 rounded-full bg-gray-200 text-sm"}),e.jsx("p",{className:"my-1.5 h-3.5 w-48 rounded-full bg-gray-200 text-sm"}),e.jsx("p",{className:"my-1.5 h-3.5 w-48 rounded-full bg-gray-200 text-sm"})]}),e.jsx("p",{className:"my-1 mt-1 h-4 rounded-full bg-gray-200 text-base"}),e.jsx("p",{className:"my-1 mt-1 h-4 rounded-full bg-gray-200 text-base"}),e.jsx("p",{className:"my-1 mt-1 h-4 rounded-full bg-gray-200 text-base"})]})]}),T=({query:s,pageTitle:a})=>{const t=o.useRef(null),i=p(),l=o.useRef(null),[r,n]=o.useState(null),[c,m]=o.useState(!1),g=b(h=>{const d=s===null,u=new FormData(h.target.form??void 0);u.get("q")===""&&u.delete("q"),i(u,{replace:!d})},300);return o.useEffect(()=>{t.current&&(t.current.value=s??"")},[t,s]),o.useEffect(()=>{var d;const h=((d=l.current)==null?void 0:d.offsetTop)??null;n(h)},[]),o.useEffect(()=>{const h=()=>{if(r===null)return;const d=l.current,u=(d==null?void 0:d.offsetTop)??0;m(u>r)};return window.addEventListener("scroll",h),()=>window.removeEventListener("scroll",h)},[r,c]),e.jsx(j,{ref:l,id:"search-form",role:"search",className:x("sticky top-20 z-20 py-4 transition-shadow",c?"border-y border-brown-900 bg-brown-100 py-4 shadow-md shadow-black/20 px-safe-offset-4 md:px-safe-offset-6 lg:px-safe-offset-8 2xl:px-safe-offset-10":"",c?"ml-[calc(env(safe-area-inset-left)*-1-1rem)] mr-[calc(env(safe-area-inset-right)*-1-1rem)] md:ml-[calc(env(safe-area-inset-left)*-1-1.5rem)] md:mr-[calc(env(safe-area-inset-right)*-1-1.5rem)] lg:ml-[calc(env(safe-area-inset-left)*-1-2rem)] lg:mr-[calc(env(safe-area-inset-right)*-1-2rem)] 2xl:ml-[calc(env(safe-area-inset-left)*-1-2.5rem)] 2xl:mr-[calc(env(safe-area-inset-right)*-1-2.5rem)]":""),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("h1",{className:x("hidden flex-1 text-4xl font-bold text-brown-900 transition-opacity sm:block",c?"opacity-100":"opacity-0"),children:a}),e.jsx("label",{htmlFor:"search-field",className:"sr-only",children:"Search"}),e.jsxs("div",{className:"relative w-full rounded-md shadow-sm sm:max-w-sm",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex h-9 items-center pl-3",children:e.jsx(N,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),e.jsx("input",{ref:t,type:"search",name:"q",id:"q",className:"block w-full rounded-md border-0 py-1.5 pl-10 pr-1.5 ring-1 ring-inset ring-gray-600 placeholder:text-gray-400 focus-within:outline-none focus:ring-2 focus:ring-inset focus:ring-brown-900 sm:text-sm sm:leading-6",placeholder:"Search...","aria-label":"Search for an animal",defaultValue:s??"",onChange:g})]})]})})},M=({animals:s,selected:a,query:t,pageTitle:i})=>{const l=o.useRef([]);return o.useEffect(()=>{a&&setTimeout(()=>{var n,c;const r=s.findIndex(m=>m.ID===a.ID);(n=l.current[r])==null||n.scrollIntoView({block:"center",behavior:"smooth"}),(c=l.current[r])==null||c.focus({preventScroll:!0})},100)},[s,a]),e.jsx(e.Fragment,{children:s.length?e.jsxs(e.Fragment,{children:[e.jsx(T,{query:t,pageTitle:i}),e.jsx("ul",{className:"grid gap-x-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-6",children:s.map((r,n)=>e.jsx("li",{id:r.ID.toString(),className:"py-4",children:e.jsx(y,{to:r.ID.toString(),ref:c=>l.current[n]=c,className:"block h-full rounded-lg bg-white shadow ring-1 ring-gray-600 transition-all focus-within:outline-none hover:shadow-lg focus:ring focus:ring-brown-900 sm:hover:scale-105",children:e.jsx(L,{animal:r})})},r.ID))})]}):e.jsx("div",{className:"mb-8 mt-8 flex h-32 flex-col items-center justify-center gap-4 rounded-2xl bg-white/25 p-4",children:e.jsx("p",{children:"Please check back for updated availablility"})})})},R=()=>e.jsx("div",{className:"animate-pulse py-4",children:e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("div",{className:"w-full rounded-md sm:max-w-sm",children:e.jsx("div",{className:"h-9 w-full rounded-md bg-gray-200 py-1.5 pl-10 pr-1.5 ring-1 ring-inset ring-gray-600"})})})}),C=()=>e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsx("ul",{className:"grid gap-x-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-6",children:[1,2,3,4,5,6,7,8,9,10,11,12].map((s,a)=>e.jsx("li",{id:a.toString(),className:"py-4",children:e.jsx("div",{className:"h-full rounded-lg bg-white ring-1 ring-gray-600",children:e.jsx(D,{})})},a))})]});function B({request:s},a){const t=new URL(s.url),i=t.searchParams.get("q"),r=t.searchParams.get("skeleton")==="true"?new Promise(()=>[]):w(i,a),n=v();return S({animals:r,selected:n,query:i})}const U=()=>{const{animals:s,selected:a,query:t}=A(),{pathname:i}=E();let l=k();l=l.filter(m=>m.pathname===`${i}/`);const r=l[0].handle,n=(r==null?void 0:r.pageTitle)||"Animals",c=(r==null?void 0:r.summary)||null;return e.jsxs("div",{children:[e.jsx("h1",{className:"mb-4 text-4xl font-bold text-brown-900",children:n}),c,e.jsx(o.Suspense,{fallback:e.jsx(C,{}),children:e.jsx(I,{resolve:s,children:m=>e.jsx(M,{animals:m,selected:a,query:t,pageTitle:n})})})]})};export{U as AnimalsPage,B as loader};
